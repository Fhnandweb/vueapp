{"remainingRequest":"C:\\Users\\web\\Desktop\\dayyyy\\vueui\\pr\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\dayyyy\\vueui\\pr\\vue_app_00\\src\\components\\sub\\comment.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"C:\\Users\\web\\Desktop\\dayyyy\\vueui\\pr\\vue_app_00\\src\\components\\sub\\comment.vue","mtime":1543907230499},{"path":"C:\\Users\\web\\Desktop\\dayyyy\\vueui\\pr\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\dayyyy\\vueui\\pr\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\web\\Desktop\\dayyyy\\vueui\\pr\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\dayyyy\\vueui\\pr\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\dayyyy\\vueui\\pr\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.app-comment h3{\n  font-size: 18px;\n}\n.app-comment textarea{\n  font-size: 14px;\n  height:80px;\n  margin: 0;\n}\n.app-comment .cmt-list{\n  margin: 5px 0;\n}\n/* .app-comment .cmt-list .cmt-item{\n  /* border: 1px solid #000; \n} */\n.app-comment .cmt-list .cmt-info{\n  margin-top: 5px;\n  line-height: 30px;\n  background: #ccc;\n}\n",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"comment.vue","sourceRoot":"src\\components\\sub","sourcesContent":["<template>\r\n  <div class=\"app-comment\">\r\n   <h3>评论子组件</h3>\r\n   <textarea v-model=\"msg\" placeholder=\"请吐槽,限制120字\" maxlength=\"120\"></textarea>\r\n   <mt-button size=\"large\" @click=\"postComment\">发表评论</mt-button>\r\n   <div class=\"cmt-list\">\r\n     <div\tclass=\"cmt-item\" v-for=\"item in list\" >\r\n       <div class=\"cmt-info\">\r\n         第 {{item.id}} 楼: 用户名:{{item.user_name}}\r\n         <p>发表时间:{{item.ctime | datetimeFilters}}</p>\r\n         <div class=\"cmt-body\">\r\n           ---{{item.content}}\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n   <mt-button @click=\"getMore\" type=\"primary\" size=\"large\">加载更多</mt-button>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {Toast} from \"mint-ui\"\r\n  export default{\r\n    created() {\r\n      this.getMore()\r\n    },\r\n    methods:{ \t \r\n      getMore(){\r\n        var nid=this.id;\r\n        this.pno ++;\r\n        var pno=this.pno;\r\n        var pageSize=this.pageSize;\r\n\t\t\t\tvar hasMove = this.pno <= this.pageCount;\r\n\t\t\t\tif(!hasMove){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n        var url=`getcomment?nid=${nid}&pno=${pno}&pageSize=${pageSize}`;\r\n        this.$http.get(url).then(result=>{\r\n            //console.log(result)\r\n          var rows=this.list.concat(result.body.data);\r\n          this.list=rows;\r\n          // console.log(this.list)\r\n          this.pageCount=result.body.pageCount;\r\n        })\r\n      },\r\n      postComment(){\r\n        var msg=this.msg;\r\n        var nid=this.id;\r\n        // var user_name=\"nieming\";\r\n        // console.log(\"msg:\"+msg+\"nid:\"+nid)\r\n        var size=msg.trim().length;\r\n        if(size==0){\r\n          Toast(\"评论不能为空\");\r\n          return;\r\n        }\r\n        //\r\n        // var url=\"addcomment\";\r\n        // var obj={nid:nid,user_name:user_name,content:msg};\r\n        // this.$http.post(url,obj).then(result=>{\r\n        //   console.log(result);\r\n        //   var obj=result.body;\r\n        //   if(obj.code==1){\r\n        //     Toast(\"评论发表成功\");\r\n        //     this.pno=0;\r\n        //     this.data=[];\r\n        //     this.getMore();\r\n        //   }else{\r\n        //     Toast(\"评论发表失败\")\r\n        //   }\r\n        // })\r\n        var url=\"http://127.0.0.1:3000/addcomment\";\r\n        var param=`nid=${nid}&content=${msg}`;\r\n        this.axios.post(url,param).then(result=>{\r\n          //console.log(result);\r\n          //console.log(result.body)\r\n          if(result.data.code==1){\r\n            Toast(\"评论发表成功\");\r\n            this.pno=0;\r\n            this.data=[];\r\n            this.getMore();\r\n          }else{\r\n            Toast(\"评论发表失败\")\r\n          }\r\n        })\r\n        this.msg=\"\"\r\n      }\r\n    },\r\n    data(){\r\n      return {\r\n        list:[],\r\n        pno:0,\r\n        pageSize:7,\r\n        pageCount:1,\r\n        // nid:this.$route.query.id,\r\n        msg:\"\",\r\n        user_name:\"\"\r\n      }\r\n    },\r\n     props:[\"id\"]\r\n  }\r\n</script>\r\n<style>\r\n  .app-comment h3{\r\n    font-size: 18px;\r\n  }\r\n  .app-comment textarea{\r\n    font-size: 14px;\r\n    height:80px;\r\n    margin: 0;\r\n  }\r\n  .app-comment .cmt-list{\r\n    margin: 5px 0;\r\n  }\r\n  /* .app-comment .cmt-list .cmt-item{\r\n    /* border: 1px solid #000; \r\n  } */\r\n  .app-comment .cmt-list .cmt-info{\r\n    margin-top: 5px;\r\n    line-height: 30px;\r\n    background: #ccc;\r\n  }\r\n</style>"]}]}